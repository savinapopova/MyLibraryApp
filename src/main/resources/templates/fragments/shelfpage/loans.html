<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<th:block th:include="~{/fragments/head.html}"/>
<body>
<div>
  {/* Desktop */}
  <div class='d-none d-lg-block mt-2'>
    {shelfCurrentLoans.length > 0 ?
    <>
    <h5>Current Loans: </h5>

    {shelfCurrentLoans.map(shelfCurrentLoan => (
    <div key={shelfCurrentLoan.book.id}>
      <div class='row mt-3 mb-3'>
        <div class='col-4 col-md-4 container'>
          {shelfCurrentLoan.book?.image ?
          <img src={shelfCurrentLoan.book?.image} width='226' height='349' alt='Book'/>
          :
          <img src={require('./../../../Images/BooksImages/book-luv2code-1000.png')}
               width='226' height='349' alt='Book'/>
          }
        </div>
        <div class='card col-3 col-md-3 container d-flex'>
          <div class='card-body'>
            <div class='mt-3'>
              <h4>Loan Options</h4>
              {shelfCurrentLoan.daysLeft > 0 &&
              <p class='text-secondary'>
                Due in {shelfCurrentLoan.daysLeft} days.
              </p>
              }
              {shelfCurrentLoan.daysLeft === 0 &&
              <p class='text-success'>
                Due Today.
              </p>
              }
              {shelfCurrentLoan.daysLeft < 0 &&
              <p class='text-danger'>
                Past due by {shelfCurrentLoan.daysLeft} days.
              </p>
              }
              <div class='list-group mt-3'>
                <button class='list-group-item list-group-item-action'
                        aria-current='true' data-bs-toggle='modal'
                        data-bs-target={`#modal${shelfCurrentLoan.book.id}`}>
                  Manage Loan
                </button>
                <Link to={'search'} class='list-group-item list-group-item-action'>
                Search more books?
                </Link>
              </div>
            </div>
            <hr/>
            <p class='mt-3'>
              Help other find their adventure by reviewing your loan.
            </p>
            <Link class='btn btn-primary' to={`/checkout/${shelfCurrentLoan.book.id}`}>
            Leave a review
            </Link>
          </div>
        </div>
      </div>
      <hr/>
      <LoansModal shelfCurrentLoan={shelfCurrentLoan} mobile={false} returnBook={returnBook}
                  renewLoan={renewLoan}/>
    </div>
    ))}
  </> :
  <>
  <h3 class='mt-3'>
    Currently no loans
  </h3>
  <Link class='btn btn-primary' to={`search`}>
  Search for a new book
  </Link>
</>
}
</div>

{/* Mobile */}
<div class='container d-lg-none mt-2'>
  {shelfCurrentLoans.length > 0 ?
  <>
  <h5 class='mb-3'>Current Loans: </h5>

  {shelfCurrentLoans.map(shelfCurrentLoan => (
  <div key={shelfCurrentLoan.book.id}>
    <div class='d-flex justify-content-center align-items-center'>
      {shelfCurrentLoan.book?.image ?
      <img src={shelfCurrentLoan.book?.image} width='226' height='349' alt='Book'/>
      :
      <img src={require('./../../../Images/BooksImages/book-luv2code-1000.png')}
           width='226' height='349' alt='Book'/>
      }
    </div>
    <div class='card d-flex mt-5 mb-3'>
      <div class='card-body container'>
        <div class='mt-3'>
          <h4>Loan Options</h4>
          {shelfCurrentLoan.daysLeft > 0 &&
          <p class='text-secondary'>
            Due in {shelfCurrentLoan.daysLeft} days.
          </p>
          }
          {shelfCurrentLoan.daysLeft === 0 &&
          <p class='text-success'>
            Due Today.
          </p>
          }
          {shelfCurrentLoan.daysLeft < 0 &&
          <p class='text-danger'>
            Past due by {shelfCurrentLoan.daysLeft} days.
          </p>
          }
          <div class='list-group mt-3'>
            <button class='list-group-item list-group-item-action'
                    aria-current='true' data-bs-toggle='modal'
                    data-bs-target={`#mobilemodal${shelfCurrentLoan.book.id}`}>
              Manage Loan
            </button>
            <Link to={'search'} class='list-group-item list-group-item-action'>
            Search more books?
            </Link>
          </div>
        </div>
        <hr/>
        <p class='mt-3'>
          Help other find their adventure by reviewing your loan.
        </p>
        <Link class='btn btn-primary' to={`/checkout/${shelfCurrentLoan.book.id}`}>
        Leave a review
        </Link>
      </div>
    </div>

    <hr/>
    <LoansModal shelfCurrentLoan={shelfCurrentLoan} mobile={true} returnBook={returnBook}
                renewLoan={renewLoan}/>
  </div>
  ))}
</> :
<>
<h3 class='mt-3'>
  Currently no loans
</h3>
<Link class='btn btn-primary' to={`search`}>
Search for a new book
</Link>
</>
}
</div>
</div>
</body>
</html>